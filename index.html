<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Camille Prospère — Portfolio & Quizz</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#ffffff;
    --accent:#d50000; /* rouge principal */
    --dark:#111;
    --muted:#666;
    --card:#fff;
    --glass: rgba(213,0,0,0.06);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:'Poppins',sans-serif;
    background:linear-gradient(180deg,var(--bg),#fff);
    color:var(--dark);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    line-height:1.4;
  }

  /* Header */
  header{
    padding:40px 6%;
    display:flex;
    gap:20px;
    align-items:center;
    justify-content:space-between;
    border-bottom:3px solid var(--glass);
  }
  .brand{
    display:flex;
    gap:18px;
    align-items:center;
  }
  .logo{
    width:72px;height:72px;border-radius:14px;background:linear-gradient(135deg,var(--accent),#ff5757);
    display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:20px;box-shadow:0 8px 30px rgba(213,0,0,0.12);
  }
  .brand h1{font-size:20px;margin:0}
  .brand p{margin:0;color:var(--muted);font-size:13px}

  nav a{margin-left:14px;text-decoration:none;color:var(--dark);font-weight:500}
  nav a.btn-red{background:var(--accent);color:#fff;padding:10px 14px;border-radius:12px;text-decoration:none}

  /* Layout */
  .container{padding:30px 6%;}
  .grid{display:grid;grid-template-columns:1fr 420px;gap:24px;}
  @media (max-width:980px){.grid{grid-template-columns:1fr;}.hero{flex-direction:column;gap:18px;}}

  /* Hero / Intro */
  .hero{
    display:flex;align-items:center;gap:22px;
    padding:24px;border-radius:14px;background:linear-gradient(90deg,rgba(213,0,0,0.03),rgba(255,87,87,0.02));
    box-shadow:0 6px 30px rgba(0,0,0,0.03);
  }
  .photo{width:120px;height:120px;border-radius:12px;overflow:hidden;flex-shrink:0;background:#eee}
  .photo img{width:100%;height:100%;object-fit:cover}
  .intro h2{margin:0 0 6px;font-size:20px}
  .intro p{margin:0;color:var(--muted)}

  /* Quiz panel */
  .card{
    background:var(--card);
    border-radius:12px;padding:18px;box-shadow:0 10px 30px rgba(0,0,0,0.06);
  }
  .controls{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:12px}
  select,input[type="text"]{padding:10px;border-radius:10px;border:1px solid #eee;min-width:160px}
  .start-btn{background:var(--accent);color:#fff;padding:10px 14px;border-radius:12px;border:none;cursor:pointer}

  /* Question UI */
  #question{font-size:18px;margin:12px 0 16px}
  .answers{display:flex;flex-direction:column;gap:10px}
  .answers button{padding:12px 14px;border-radius:12px;border:1px solid #eee;background:#fff;text-align:left;cursor:pointer}
  .answers button.correct{outline:3px solid rgba(0,180,0,0.12);background:linear-gradient(90deg,#f4fff4,#fff)}
  .answers button.wrong{outline:3px solid rgba(255,0,0,0.08);background:#fff7f7}
  .answers button:disabled{opacity:0.8;cursor:not-allowed}

  .next-row{display:flex;justify-content:space-between;align-items:center;margin-top:14px}
  .next-btn{background:var(--dark);color:#fff;padding:10px 14px;border-radius:12px;border:none;cursor:pointer}
  .small-muted{font-size:13px;color:var(--muted)}

  /* Otaku / Culture card */
  .result-card{
    margin-top:14px;padding:14px;border-radius:12px;background:linear-gradient(120deg,#fff,#fff);
    display:flex;gap:12px;align-items:center;border:1px solid rgba(0,0,0,0.04)
  }
  .badge{width:70px;height:70px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-weight:700;color:white}
  .badge.master{background:linear-gradient(135deg,#ff6b6b,#d50000)}
  .badge.confirm{background:linear-gradient(135deg,#ffb199,#ff6b6b)}
  .badge.begin{background:linear-gradient(135deg,#ccc,#999)}
  .card-body{flex:1}
  .card-body h4{margin:0 0 6px}
  .card-body p{margin:0;color:var(--muted);font-size:14px}

  /* Leaderboard */
  .leader{margin-top:18px}
  .leader li{padding:8px 10px;border-radius:8px;border:1px dashed rgba(0,0,0,0.04);margin-bottom:8px;display:flex;justify-content:space-between;align-items:center}

  /* Footer */
  footer{padding:18px 6%;text-align:center;color:var(--muted);font-size:14px;border-top:1px solid rgba(0,0,0,0.03);margin-top:30px}
</style>
</head>
<body>

<header>
  <div class="brand">
    <div class="logo">CP</div>
    <div>
      <h1>Camille Prospère</h1>
      <p>@Kyo Soma — Portfolio & Quiz Manga / Culture</p>
    </div>
  </div>
  <nav>
    <a href="#games">Quizzes</a>
    <a href="#leaderboard">Classements</a>
    <a class="btn-red" href="#contact">Contact</a>
  </nav>
</header>

<main class="container">
  <section class="grid">
    <!-- LEFT: Quiz / Game -->
    <div>
      <div class="hero card">
        <div class="photo">
          <img src="https://images.unsplash.com/photo-1601758123927-1b00f03f8d2a?auto=format&fit=crop&w=400&q=60" alt="Camille">
        </div>
        <div class="intro">
          <h2>Salut, je suis Camille Prospère</h2>
          <p>Bienvenue sur mon portfolio interactif — teste tes connaissances et décroche une carte Otaku ou Culturelle !</p>
        </div>
      </div>

      <section id="games" class="card" style="margin-top:18px">
        <h3>Choisis un quiz</h3>
        <div class="controls">
          <select id="category-select" title="Choisir catégorie">
            <option value="manga">Manga — Quiz</option>
            <option value="culture">Culture Générale — Quiz</option>
            <option value="mix">Mix (manga + culture)</option>
          </select>
          <input id="player-name" type="text" placeholder="Ton pseudo (ex: KyoSoma)" aria-label="pseudo">
          <button id="start-btn" class="start-btn">Démarrer le quiz</button>
          <button id="reset-leader" style="background:#fff;border:1px solid #eee;border-radius:10px;padding:10px" title="Réinitialiser classement">Réinit classements</button>
        </div>

        <div id="quiz-area" style="display:none;margin-top:10px">
          <div id="question-wrap">
            <div id="question"></div>
            <div class="answers" id="answers"></div>
          </div>

          <div class="next-row">
            <div class="small-muted" id="progress"></div>
            <div>
              <button id="next-btn" class="next-btn" style="display:none">Suivant</button>
            </div>
          </div>

          <div id="result-section" style="display:none">
            <div class="result-card">
              <div id="badge" class="badge">--</div>
              <div class="card-body">
                <h4 id="result-title">Ton niveau</h4>
                <p id="result-desc">Description du niveau et conseils.</p>
              </div>
            </div>

            <div style="display:flex;gap:10px;margin-top:10px;flex-wrap:wrap">
              <button id="save-score" class="start-btn">Enregistrer au classement</button>
              <button id="view-card" style="padding:10px;border-radius:10px;border:1px solid #eee">Afficher la carte complète</button>
              <button id="play-again" style="padding:10px;border-radius:10px;border:1px solid #eee">Rejouer</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Leaderboard quick view -->
      <section id="leaderboard" class="card" style="margin-top:18px">
        <h3>Classements globaux</h3>
        <p class="small-muted">Top 10 (persisté dans ton navigateur)</p>
        <ul id="global-leader" class="leader"></ul>
      </section>
    </div>

    <!-- RIGHT: Sidebar / Card & Details -->
    <aside>
      <div class="card">
        <h4>Carte Otaku / Culturelle</h4>
        <p class="small-muted">Générée à la fin du quiz — montre ton niveau, ton badge et ton score.</p>
        <div style="margin-top:12px;display:grid;gap:10px">
          <div id="preview-card" class="result-card" style="display:none">
            <div id="preview-badge" class="badge">--</div>
            <div class="card-body">
              <h4 id="preview-name">Pseudo</h4>
              <p id="preview-info">--</p>
            </div>
          </div>
          <div id="no-preview" class="small-muted">Fais un quiz pour voir la carte ici.</div>
          <button id="export-json" style="padding:10px;border-radius:10px;border:1px solid #eee">Exporter classement (JSON)</button>
        </div>
      </div>

      <div class="card" style="margin-top:14px">
        <h4>À propos</h4>
        <p class="small-muted">Camille Prospère — Portfolio interactif — Thème blanc/rouge — Quizz mangas et culture</p>
        <p style="margin-top:8px">Envie d'ajouts (sons, images, compte multi-utilisateur…) ? Dis-le, je l'ajoute.</p>
      </div>
    </aside>
  </section>
</main>

<footer id="contact">
  <div>Contact : <a href="mailto:gnandekouakou7@gmail.com">gnandekouakou7@gmail.com</a> • <a href="https://www.facebook.com/profile.php?id=61578153767211" target="_blank">Facebook</a></div>
  <div style="margin-top:8px">© 2025 Camille Prospère — Tous droits réservés</div>
</footer>

<script>
/* ---------------------------------------------------
   Données des quizzes : catégories et questions
   Ajoute / édite facilement ci-dessous
--------------------------------------------------- */
const QUIZZES = {
  manga: [
    {q:"Quel est le fruit du démon de Luffy ?", a:["Gomu Gomu","Mera Mera","Hito Hito","Gura Gura"], correct:"Gomu Gomu"},
    {q:"Qui est le fils de Goku ?", a:["Vegeta","Trunks","Gohan","Piccolo"], correct:"Gohan"},
    {q:"Comment s'appelle la sœur de Tanjiro ?", a:["Shinobu","Kanao","Nezuko","Mitsuri"], correct:"Nezuko"},
    {q:"Qui est le capitaine de l'équipage Chapeau de Paille ?", a:["Zoro","Luffy","Sanji","Nami"], correct:"Luffy"},
    {q:"Qui a créé Naruto ?", a:["Masashi Kishimoto","Eiichiro Oda","Tite Kubo","Hajime Isayama"], correct:"Masashi Kishimoto"}
  ],
  culture: [
    {q:"Quelle est la capitale du Japon ?", a:["Osaka","Tokyo","Kyoto","Hiroshima"], correct:"Tokyo"},
    {q:"Combien de continents y a-t-il ?", a:["5","6","7","8"], correct:"7"},
    {q:"Qui a peint la Joconde ?", a:["Van Gogh","Picasso","Léonard de Vinci","Raphaël"], correct:"Léonard de Vinci"},
    {q:"Quel est l'élément chimique de symbole 'O' ?", a:["Or","Oxygène","Osmium","Oganesson"], correct:"Oxygène"},
    {q:"En quelle année l'homme a-t-il marché sur la Lune pour la première fois ?", a:["1965","1969","1972","1959"], correct:"1969"}
  ]
};
// Mix combine
QUIZZES.mix = [...QUIZZES.manga, ...QUIZZES.culture].sort(()=>Math.random()-0.5);

/* ---------------------------------------------------
   Sélection et éléments DOM
--------------------------------------------------- */
const categorySelect = document.getElementById('category-select');
const nameInput = document.getElementById('player-name');
const startBtn = document.getElementById('start-btn');
const resetLeaderBtn = document.getElementById('reset-leader');

const quizArea = document.getElementById('quiz-area');
const questionEl = document.getElementById('question');
const answersEl = document.getElementById('answers');
const nextBtn = document.getElementById('next-btn');
const progressEl = document.getElementById('progress');

const resultSection = document.getElementById('result-section');
const badgeEl = document.getElementById('badge');
const resultTitle = document.getElementById('result-title');
const resultDesc = document.getElementById('result-desc');
const saveScoreBtn = document.getElementById('save-score');
const viewCardBtn = document.getElementById('view-card');
const playAgainBtn = document.getElementById('play-again');

const globalLeader = document.getElementById('global-leader');

const previewCard = document.getElementById('preview-card');
const previewBadge = document.getElementById('preview-badge');
const previewName = document.getElementById('preview-name');
const previewInfo = document.getElementById('preview-info');
const noPreview = document.getElementById('no-preview');
const exportJsonBtn = document.getElementById('export-json');

/* ---------------------------------------------------
   État du quiz
--------------------------------------------------- */
let state = {
  category: 'manga',
  player: '',
  questions: [],
  currentIndex: 0,
  score: 0,
  usedQuestions: []
};

const STORAGE_KEY = 'cp_portfolio_leaderboard_v1';

/* ---------------------------------------------------
   Helpers : leaderboard storage (localStorage)
--------------------------------------------------- */
function loadLeaderboard(){
  try{
    const raw = localStorage.getItem(STORAGE_KEY);
    return raw ? JSON.parse(raw) : [];
  }catch(e){ return []; }
}
function saveLeaderboard(data){
  localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
}
function addScore(entry){
  const list = loadLeaderboard();
  list.push(entry);
  // trier par score décroissant, puis date
  list.sort((a,b)=> (b.scorePct - a.scorePct) || (new Date(b.time)-new Date(a.time)));
  saveLeaderboard(list);
  renderGlobalLeader();
}
function clearLeaderboard(){
  localStorage.removeItem(STORAGE_KEY);
  renderGlobalLeader();
}

/* ---------------------------------------------------
   Render global leaderboard (top 10)
--------------------------------------------------- */
function renderGlobalLeader(){
  const list = loadLeaderboard().slice(0,10);
  globalLeader.innerHTML = '';
  if(list.length===0){
    globalLeader.innerHTML = '<li class="small-muted">Aucun score enregistré — sois le premier !</li>';
    return;
  }
  list.forEach(item=>{
    const li = document.createElement('li');
    li.innerHTML = `<strong>${escapeHtml(item.player)}</strong> <span style="color:var(--muted)">${escapeHtml(item.category)}</span>
                    <span style="margin-left:auto">${item.score}/${item.total} (${Math.round(item.scorePct)}%)</span>`;
    globalLeader.appendChild(li);
  });
}

/* ---------------------------------------------------
   Quiz flow
--------------------------------------------------- */
startBtn.addEventListener('click', ()=>{
  const player = (nameInput.value || '').trim();
  state.player = player || 'Invité';
  state.category = categorySelect.value;
  state.questions = (QUIZZES[state.category] || []).slice().sort(()=>Math.random()-0.5);
  state.currentIndex = 0;
  state.score = 0;

  // show UI
  quizArea.style.display = 'block';
  resultSection.style.display = 'none';
  noPreview.style.display = 'none';
  previewCard.style.display = 'none';
  showQuestion();
});

resetLeaderBtn.addEventListener('click', ()=>{
  if(confirm('Supprimer tous les scores enregistrés dans ce navigateur ?')) clearLeaderboard();
});

/* display a question */
function showQuestion(){
  const qObj = state.questions[state.currentIndex];
  if(!qObj){
    finishQuiz();
    return;
  }
  questionEl.textContent = `${state.currentIndex+1}. ${qObj.q}`;
  answersEl.innerHTML = '';
  qObj.a.forEach(ans=>{
    const btn = document.createElement('button');
    btn.textContent = ans;
    btn.onclick = ()=>selectAnswer(btn, ans);
    answersEl.appendChild(btn);
  });
  progressEl.textContent = `Question ${state.currentIndex+1} / ${state.questions.length}`;
  nextBtn.style.display = 'none';
}

/* when user picks an answer */
function selectAnswer(btn, ans){
  const qObj = state.questions[state.currentIndex];
  // disable all
  Array.from(answersEl.children).forEach(b=>b.disabled=true);
  // mark correct/wrong
  if(ans === qObj.correct){
    btn.classList.add('correct'); state.score++;
  } else {
    btn.classList.add('wrong');
    // mark the correct one
    Array.from(answersEl.children).forEach(b=>{
      if(b.textContent === qObj.correct) b.classList.add('correct');
    });
  }
  state.currentIndex++;
  // if more questions show next
  if(state.currentIndex < state.questions.length){
    nextBtn.style.display = 'inline-block';
  } else {
    // finish immediately after a short delay
    setTimeout(finishQuiz, 700);
  }
}

/* next */
nextBtn.addEventListener('click', ()=> {
  showQuestion();
});

/* compute level and show results */
function finishQuiz(){
  questionEl.textContent = '';
  answersEl.innerHTML = '';
  nextBtn.style.display = 'none';
  const total = state.questions.length;
  const score = state.score;
  const pct = total === 0 ? 0 : (score/total)*100;

  // levels: <40% débutant ; 40-70% confirmé ; >70% maître
  let level = '', desc='', badgeClass='begin', badgeLabel='--';
  if(pct < 40){
    level = 'Débutant'; badgeClass='begin'; badgeLabel='DEB';
    desc = `Tu as ${score}/${total}. Continue à apprendre — regarde des animés, lis des mangas et pose des questions !`;
  } else if(pct < 70){
    level = 'Confirmé'; badgeClass='confirm'; badgeLabel='CONF';
    desc = `Bien joué ${state.player} — ${score}/${total}. Tu maîtrises pas mal, passe au niveau supérieur !`;
  } else {
    level = 'Maître'; badgeClass='master'; badgeLabel='MASTER';
    desc = `Impressionnant ! ${score}/${total}. Tu es un vrai expert dans cette catégorie.`;
  }

  // show result section
  resultSection.style.display = 'block';
  badgeEl.textContent = `${Math.round(pct)}%`;
  badgeEl.className = 'badge ' + (badgeClass === 'begin' ? 'begin' : (badgeClass === 'confirm' ? 'confirm' : 'master'));
  resultTitle.textContent = `${level} — ${state.category.toUpperCase()}`;
  resultDesc.textContent = desc;

  // preview card
  previewCard.style.display = 'flex';
  previewBadge.textContent = badgeLabel;
  previewBadge.className = 'badge ' + (badgeClass === 'begin' ? 'begin' : (badgeClass === 'confirm' ? 'confirm' : 'master'));
  previewName.textContent = `${state.player}`;
  previewInfo.textContent = `${level} • ${score}/${total} (${Math.round(pct)}%) • ${state.category}`;

  // store last result for later saving
  state.lastResult = {player: state.player, category: state.category, score, total, scorePct: pct, level, time: (new Date()).toISOString()};
}

/* save to leaderboard */
saveScoreBtn.addEventListener('click', ()=>{
  if(!state.lastResult){ alert('Fais d’abord un quiz !'); return; }
  addScore(state.lastResult);
  alert('Score enregistré ✅');
});

/* view / enlarge card */
viewCardBtn.addEventListener('click', ()=>{
  if(!state.lastResult){ alert('Fais d’abord un quiz !'); return; }
  const r = state.lastResult;
  alert(`${r.player} — ${r.category}\nScore: ${r.score}/${r.total} (${Math.round(r.scorePct)}%)\nNiveau: ${r.level}`);
});

/* replay */
playAgainBtn.addEventListener('click', ()=>{
  // restart same category
  state.questions = (QUIZZES[state.category] || []).slice().sort(()=>Math.random()-0.5);
  state.currentIndex = 0; state.score = 0; resultSection.style.display='none';
  showQuestion();
});

/* export leaderboard JSON file */
exportJsonBtn.addEventListener('click', ()=>{
  const data = loadLeaderboard();
  const blob = new Blob([JSON.stringify(data, null, 2)], {type:'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url; a.download = 'leaderboard_camille.json'; document.body.appendChild(a); a.click(); a.remove();
  URL.revokeObjectURL(url);
});

/* small helper to prevent XSS when injecting names/category */
function escapeHtml(str){
  return String(str).replace(/[&<>"']/g, s=>{
    return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[s];
  });
}

/* initialization */
renderGlobalLeader();

/* Small UX: allow Enter to start */
nameInput.addEventListener('keydown', e=>{
  if(e.key === 'Enter') startBtn.click();
});

/* On load: set a default player name if localStorage has one (optional) */
(function(){
  const saved = localStorage.getItem('cp_portfolio_name');
  if(saved) nameInput.value = saved;
})();
nameInput.addEventListener('change', ()=>localStorage.setItem('cp_portfolio_name', nameInput.value.trim()));
</script>

</body>
</html>
